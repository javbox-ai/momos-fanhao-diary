<!DOCTYPE html>
<html lang="{{ lang }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% if lang == 'cn' %}
    <title>{{ seo.title_cn | default(page_title + ' | Fanhao Diary', true) }}</title>
    <meta name="description" content="{{ seo.meta_description_cn | default('探索 Fanhao Diary 上的所有' + page_title, true) }}">
    {% else %}
    <title>{{ seo.title_en | default(page_title + ' | Fanhao Diary', true) }}</title>
    <meta name="description" content="{{ seo.meta_description_en | default('Explore all ' + page_title + ' on Fanhao Diary.', true) }}">
    {% endif %}
    <link rel="stylesheet" href="{{ path_css }}">
    <link rel="icon" href="{{ path_favicon }}" type="image/png">
</head>
<body>
    <header>
        <div class="logo-area">
            <a href="{{ 'index_cn.html' if lang == 'cn' else 'index_en.html' }}" class="logo-text">Fanhao Diary</a>
        </div>
        <div class="search-bar">
            <input type="search" id="searchInput" placeholder="{{ '搜尋...' if lang == 'cn' else 'Search...' }}">
        </div>
        <div class="language-switcher">
            <a href="{{ alternate_lang_url }}" class="button lang-switch-btn">
                {% if lang == 'cn' %}Read in English{% else %}閱讀中文版{% endif %}
            </a>
        </div>
    </header>

    <main class="container">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb card">
                <li class="breadcrumb-item"><a href="{{ 'index_cn.html' if lang == 'cn' else 'index_en.html' }}">{{ '首頁' if lang == 'cn' else 'Home' }}</a></li>
                <li class="breadcrumb-item active" aria-current="page">{{ page_title }}</li>
            </ol>
        </nav>

        <h1 class="page-main-title">{{ page_title }}</h1>

        <section class="overview-list-section card">
            {% if items %}
                <ul class="overview-list">
                    {% for item in items %}
                    <li class="overview-list-item">
                        <a href="{{ item.url }}" class="chip-link">
                            {{ item.name_display }}
                            {% if item.video_count is defined %} ({{ item.video_count }}) {% endif %}
                        </a>
                        {% if item_type == 'category' and item.description_display %}
                            <p class="item-description">{{ item.description_display }}</p>
                        {% elif item_type == 'actress' and item.bio_display %}
                             <p class="item-description">{{ item.bio_display | truncate(100, true) }}</p>
                        {% endif %}
                    </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p class="no-content-message">{% if lang == 'cn' %}暫無內容。{% else %}No content available yet.{% endif %}</p>
            {% endif %}
        </section>
        
        <section class="disclaimer-section card" style="margin-top: 30px;">
            <h2 class="disclaimer-title">{% if lang == 'cn' %}免責聲明{% else %}Disclaimer{% endif %}</h2>
            <p class="disclaimer-text">
                {% if lang == 'cn' %}
                本網站內容完全來自網際網路，僅供測試交流，並無任何資源儲存於本站。若有內容不慎侵犯您的權益，請聯繫我們並提供相關證明，我們將盡快處理。瀏覽本站內容時，您應自行判斷其合法性、正確性及完整性，若因相關內容引致任何損失，本站恕不負責。
                {% else %}
                The content on this website is sourced entirely from the internet for testing and communication purposes only. No resources are stored on this site. If any content inadvertently infringes upon your rights, please contact us with relevant proof, and we will address it promptly. When browsing content on this site, you should independently assess its legality, accuracy, and completeness. This site is not liable for any losses incurred due to such content.
                {% endif %}
            </p>
        </section>

    </main>

    <footer>
        <p>Fanhao Diary &copy; {{ current_year }}. {% if lang == 'cn' %}用心看片，隨手筆記。{% else %}Watching with love, writing with joy.{% endif %}</p>
    </footer>

    <script src="{{ path_ad_js }}"></script>
    <script src="{{ path_search_js }}"></script>
    <script src="{{ path_path_resolver_js }}"></script>
    <script>
        const searchInput = document.getElementById('searchInput');
        if (searchInput) {
            searchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && e.target.value.trim() !== '') {
                    const query = e.target.value.trim();
                    window.location.href = 'search.html?q=' + encodeURIComponent(query) + '&lang={{ lang }}'; // Search page needs to exist
                }
            });
        }
    </script>
</body>
</html> 